function process_sentence(t,e,n,r){var a=0,s=0,l=[];for(i=0;i<t.length;i++){var o=t[i],c=o.length,d=n[i];l.push({start:a,len:c+1,languageindex:e,word:o,xstart:s,xend:s+d}),a+=c+1,s+=d+r}return[l,a]}function preprocess(t,e,n){var r={};for(re=process_sentence(t.e,0,e.e,n),r.nodes_e=re[0],rf=process_sentence(t.f,1,e.f,n),r.nodes_f=rf[0],r.max_chars=Math.max(re[1],rf[1]),r.links=[],i=0;i<t.alignment.length;i++)r.links.push({source:t.alignment[i][0],target:t.alignment[i][1]});return r}function drawnodes(t,e,n,r,a){e=t.selectAll("node").data(e).enter().append("text").attr("x",function(t){return t.xstart+a}).attr("y",function(t){return n}).text(function(t){return t.word}).attr("fill","black").attr("font-size",r)}function drawlinks(t,e,n,r,a,s,i,l){t.selectAll("link").data(e.links).enter().append("line").attr("class","link").attr("x1",function(t){var r=e.nodes_e.filter(function(e,n){return n==t.source})[0];return d3.select(this).attr("y1",n+a),.5*r.xstart+.5*r.xend+i}).attr("x2",function(t){var n=e.nodes_f.filter(function(e,n){return n==t.target})[0];return d3.select(this).attr("y2",r-s),.5*n.xstart+.5*n.xend+i}).attr("fill","none").attr("stroke","#00A30B").attr("stroke-width",l)}function drawseparator(t,e){if(e>0)t.append("line").attr("class","separator").attr("x1",0).attr("x2",600).attr("y1",75*e).attr("y2",75*e).attr("fill","none").attr("stroke","#00A30B").attr("stroke-width","0.5px")}function drawtitle(t,e,n,r){t.append("text").attr("class","methodtitle").attr("x",5).attr("y",75*e+7).text(n).attr("fill","#00A30B").attr("font-size",r).attr("font-style","italic")}function get_lengths(t,e,n){return widths=[],t.append("g").selectAll(".dummyText").data(e).enter().append("text").attr("fill","black").attr("font-size",n).text(function(t){return t}).each(function(t,e){var n=this.getComputedTextLength();widths.push(n),this.remove()}),widths}function get_sentence_length(t,e){return t.reduce((t,e)=>t+e,0)+t.length*e}function compute_lengths(t,e,n,r){var a={};return a.e=get_lengths(t,e.e,n),a.f=get_lengths(t,e.f,n),a.etotal=get_sentence_length(a.e,r),a.ftotal=get_sentence_length(a.f,r),a.maxreq=Math.max(a.etotal,a.ftotal),a}function drawit(t,e,n){var r=12,a=5,s=8,i=5,l=1.5;if(document.getElementById("my-svg-content-responsive"))var o=d3.select("#my-svg-content-responsive");else o=d3.select("#alignment").append("div").classed("svg-container",!0).attr("id","my-svg-container").append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 600 225").classed("svg-content-responsive",!0).attr("id","my-svg-content-responsive");if((c=compute_lengths(o,t,r,a)).maxreq>600){console.log("ADJUSTING SIZES"),console.log(1-c.maxreq/15e3),scalefactor=600/c.maxreq*(1-c.maxreq/15e3),a*=scalefactor,r*=scalefactor,s*=scalefactor,i*=scalefactor,l*=scalefactor;var c=compute_lengths(o,t,r,a);console.log(c.maxreq)}drawseparator(o,e),drawtitle(o,e,n,.5*r),data=preprocess(t,c,a);var d=(600-c.maxreq)/2,f=20+75*e,u=65+75*e;drawnodes(o,data.nodes_e,f,r,d),drawnodes(o,data.nodes_f,u,r,d),drawlinks(o,data,f,u,i,s+i,d,l)}function main(){input={e:["Das","ist","ein","Beispiel","."],f:["WWW","is","an","example","."],alignment:[[0,1],[1,1],[3,2]]},drawit(input)}function extractalignment(t,e){return result={},result.e=t.e,result.f=t.f,result.alignment=t.alignment[e],result}function createGraph(t){drawit(extractalignment(t,"inter"),0,"ArgMax"),drawit(extractalignment(t,"itermax"),1,"IterMax"),drawit(extractalignment(t,"mwmf"),2,"Match")}